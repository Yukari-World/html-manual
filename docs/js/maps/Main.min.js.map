{"version":3,"sources":["Main.js"],"names":["storageAvailable","IndexedDBConnecter","SendAjax","sideList","startTime","Date","now","dbName","dbVersion","randomWordList","xorRand","roopEvent","bWordDecide","sideToggle","XorShift","[object Object]","w","Math","floor","dateTemp","this","x","max","getDate","getMonth","getSeconds","getMinutes","y","getFullYear","z","length","summary","console","log","toHex","val","toString","toUpperCase","substr","t","randNumber","randomInt32","getRandomWord","Promise","resolve","reject","FormData","then","json","catch","error","secondsInterval","seconds","bdate","setrandomWord","async","randomOutput","jsonData","textRandom","document","getElementById","dl","createElement","listCount","setAttribute","textContent","appendChild","randomList","window","Worker","worker","name","addEventListener","event","temp","data","mode","insertAdjacentHTML","post","postMessage","dataTemp","dt","dd","title","original","wordNum","randomFloat","randomWord","isEnableStorage","dbTable","dbConnection","isIndexedDB","initializeConnection","db","target","result","createObjectStore","keyPath","transaction","customerObjectStore","objectStore","sideName","add","id","value","btnElement","checked","setValue","localStorage","setItem","linkElement","getValue","dbValue","undefined","getItem","cntRandom","setInterval"],"mappings":"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","file":"Main.min.js","sourcesContent":["/**\n * @file マニュアル用JavaScript\n *\n * @module  manual\n * @since   1.0.0\n * @version 1.5.0\n */\n\n// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n// Initialize\n\n// ----------------------------------------------------------------------------------------------------\n// Import\nimport { storageAvailable, IndexedDBConnecter } from './common.min.js';\nimport { SendAjax } from './ajax-response.min.js';\n\n// ----------------------------------------------------------------------------------------------------\n// Constant\n/**\n * メニューカテゴリリスト\n * @constant\n * @default\n * @type {Array.<string>}\n * @since   1.1.0\n * @version 1.5.0\n */\nconst sideList = [\n\t'Main',\n\t'CSS',\n\t'HTML',\n\t'JavaScript',\n\t'Language',\n\t'Node',\n\t'PHP',\n\t'SCSS',\n\t'SQL',\n\t'Wordpress',\n\t'Other',\n];\n\nconst startTime = Date.now();\nconst dbName = 'Technical-Manual';\nconst dbVersion = 1;\n\n// ----------------------------------------------------------------------------------------------------\n// Value\nlet bWordDecide = false;\n// let cPopup;\nlet sideToggle = [];\n/**\n * ランダムワードマニア\n *\n * @constant\n * @property {string}   title       タイトル\n * @property {string}   original    引用元\n * @property {string}   summary     概要\n * @type     {Array.<object>}\n */\nlet randomWordList;\nlet xorRand;\nlet roopEvent;\n\n// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n// Class\n\n/**\n * Xor Shift乱数\n *\n * @type    {class}\n * @since   1.1.0\n * @version 1.5.0\n */\nclass XorShift {\n\t/**\n\t * コンストラクタメソッド\n\t *\n\t * @constructs\n\t * @param {number}  [w=Math.floor(Date.now() / 1000)]   Seed Number\n\t */\n\tconstructor(w = Math.floor(Date.now() / 1000)) {\n\t\t// Initialize\n\t\tlet dateTemp = new Date();\n\n\t\t/**\n\t\t * 乱数 X\n\t\t *\n\t\t * 値は以下の何れかから大きい値を選択\n\t\t * <ul>\n\t\t * <li>Day ^ (Month / 4 + 2)</li>\n\t\t * <li>Month * Day * max(Seconds ^ 2, 31) * max(Minites ^ 2, 53)</li>\n\t\t * </ul>\n\t\t *\n\t\t * @default max(Day ^ (Month / 4 + 2), Month * Day * max(Seconds ^ 2, 31) * max(Minites ^ 2, 53))\n\t\t * @type {number}\n\t\t */\n\t\tthis.x = Math.max(Math.floor(dateTemp.getDate() ** ((dateTemp.getMonth() + 1) / 4 + 2)), (dateTemp.getMonth() + 1) * dateTemp.getDate() * Math.max(dateTemp.getSeconds() ** 2, 31) * Math.max(dateTemp.getMinutes() ** 2, 53)); // 123456789\n\n\t\t/**\n\t\t * 乱数 Y\n\t\t *\n\t\t * @default max(Seconds, 5) ^ floor(max(Minites, 10) / 10) + max(Seconds, 1) * max(Minites, 1) * floor(Year / 10)\n\t\t * @type {number}\n\t\t */\n\t\tthis.y = Math.max(Math.max(dateTemp.getSeconds(), 5) ** Math.floor(Math.max(dateTemp.getMinutes(), 10) / 10) + Math.max(dateTemp.getSeconds(), 1) * Math.max(dateTemp.getMinutes(), 1) * Math.floor(dateTemp.getFullYear() / 10)); // 362436069\n\n\t\t/**\n\t\t * 乱数 Z\n\t\t *\n\t\t * @default randomWordList.length ^ 4 + (配列randomWordListの2, 3, 5, 7 の文字列の文字数の和) * (配列randomWordListの11, 13, 17, 19 の文字列の文字数の和) * (配列randomWordListの23, 29 の文字列の文字数の和) + (配列randomWordListの31, 37 の文字列の文字数の和)\n\t\t * @type {number}\n\t\t */\n\t\tthis.z = randomWordList.length ** 4 + (randomWordList[2].summary.length + randomWordList[3].summary.length + randomWordList[5].summary.length + randomWordList[7].summary.length) * (randomWordList[11].summary.length + randomWordList[13].summary.length + randomWordList[17].summary.length + randomWordList[19].summary.length) * (randomWordList[23].summary.length + randomWordList[29].summary.length) + (randomWordList[31].summary.length + randomWordList[37].summary.length); // 521288629;\n\n\t\t/**\n\t\t * 乱数 W\n\t\t *\n\t\t * デフォルト初期値は現在の時間の1970/01/01 00:00:00からの秒数\n\t\t *\n\t\t * @type {number}\n\t\t */\n\t\tthis.w = w;\n\n\t\tconsole.log('XorShift Seed Info:\\n' +\n\t\t\t'X: ' + this.toHex(this.x) + ' (' + this.x + ')\\n' +\n\t\t\t'Y: ' + this.toHex(this.y) + ' (' + this.y + ')\\n' +\n\t\t\t'Z: ' + this.toHex(this.z) + ' (' + this.z + ')\\n' +\n\t\t\t'W: ' + this.toHex(this.w) + ' (' + this.w + ')'\n\t\t);\n\t}\n\n\t/**\n\t * ログ用10進数→4byte16進数出力\n\t *\n\t * @public\n\t * @param   {number}    val 変換する10進数\n\t * @returns {string}        16進数\n\t * @since   1.3.7\n\t * @version 1.5.0\n\t */\n\ttoHex(val) {\n\t\treturn '0x' + ('00000000' + val.toString(16).toUpperCase()).substr(-8);\n\t}\n\n\t/**\n\t * 乱数の生成\n\t *\n\t * @public\n\t * @returns {number}    乱数の結果\n\t * @since   1.1.0\n\t * @version 1.5.0\n\t */\n\trandomInt32() {\n\t\tlet t = this.x ^ this.x << 11;\n\t\tthis.x = this.y;\n\t\tthis.y = this.z;\n\t\tthis.z = this.w;\n\t\tthis.w = this.w ^ this.w >>> 19 ^ (t ^ t >>> 8);\n\n\t\t// console.log('Number: ' + this.w);\n\t\treturn this.w;\n\t}\n\n\t/**\n\t * 浮動少数の乱数の生成\n\t *\n\t * @public\n\t * @returns {number}    乱数の結果\n\t * @since   1.1.0\n\t * @version 1.5.0\n\t */\n\trandomFloat() {\n\t\tlet randNumber = this.randomInt32();\n\t\tif (randNumber < 0) {\n\t\t\trandNumber = ~randNumber;\n\t\t}\n\t\treturn randNumber / (2 ** 31 - 1);\n\t}\n}\n\n// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n// Function\n\n/**\n * ランダムワード取得\n *\n * @returns  {Promise}  終了コード\n * @requires module:ajax-response\n * @since   1.2.0\n * @version 1.5.0\n */\nfunction getRandomWord() {\n\treturn new Promise(function (resolve, reject) {\n\t\tSendAjax('json/randomWord.json', new FormData(), 'GET')\n\t\t\t.then(function (json) {\n\t\t\t\t// console.log(json);\n\t\t\t\tresolve(json);\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.error('request failed', error);\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n}\n\n/**\n * 指定時間毎に実行する\n *\n * @param   {number}    [seconds=5] 更新間隔(秒)\n * @returns {void}\n * @since   1.0.0\n * @version 1.5.0\n */\nfunction secondsInterval(seconds = 5) {\n\t// Initialize\n\tlet bdate = new Date();\n\n\tif (bdate.getSeconds() % seconds === 0 && bWordDecide === false) {\n\t\tbWordDecide = true;\n\t\tsetrandomWord();\n\t} else if (bdate.getSeconds() % seconds === 1 && bWordDecide === true) {\n\t\tbWordDecide = false;\n\t}\n}\n\n/**\n * ランダムワードの解説を出力\n *\n * @async\n * @param   {JSON}  jsonData    JSON Data\n * @returns {void}\n * @since   1.0.0\n * @version 1.5.0\n */\nasync function randomOutput(jsonData) {\n\t// Initialize\n\tconst textRandom = document.getElementById('randomOutput');\n\tconst dl = document.createElement('dl');\n\tlet listCount = 0;\n\n\t// リストを置く場所を予め作る\n\tdl.setAttribute('id', 'RandomList');\n\ttextRandom.textContent = '';\n\ttextRandom.appendChild(dl);\n\n\tconst randomList = document.getElementById('RandomList');\n\n\t// Workerの使用可否の確認\n\tif (window.Worker) {\n\t\t/**\n\t\t * Workerの読み込み\n\t\t * 相対パスで読み込む場合実行するHTMLからの相対パスなので要注意\n\t\t */\n\t\t// const worker = new Worker('js/WorkerTask.js', { name: 'Worker Task', type: 'module' });\n\t\tconst worker = new Worker('js/WorkerTask.min.js', { name: 'Worker Task' });\n\n\t\t// Workerからデータを受け取る時の処理\n\t\t// Switch文を利用することで処理分岐を作成している\n\t\tworker.addEventListener('message', function (event) {\n\t\t\tlet temp = event.data;\n\t\t\tswitch (temp.mode) {\n\t\t\tcase 'listResult':\n\t\t\t\trandomList.insertAdjacentHTML('beforeend', temp.post);\n\t\t\t\tbreak;\n\t\t\tcase 'tagList':\n\t\t\t\tconsole.log(temp.post);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('Task mode \"' + temp.mode + '\" is not found.');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\tworker.addEventListener('messageerror', function (event) {\n\t\t\tconsole.error('Task failed', event.data);\n\t\t});\n\n\t\t// JSONデータを丸投げ\n\t\tworker.postMessage({'mode': 'createRandList'});\n\t} else {\n\t\tfor (let dataTemp of jsonData) {\n\t\t\tconst dt = document.createElement('dt');\n\t\t\tconst dd = document.createElement('dd');\n\n\t\t\tdt.setAttribute('id', 'wordID' + ++listCount);\n\n\t\t\tdt.insertAdjacentHTML('beforeend', '<h3>' + dataTemp.title + '</h3><h4>出典: ' + dataTemp.original + '</h4>');\n\t\t\tdd.insertAdjacentHTML('beforeend', dataTemp.summary);\n\n\t\t\trandomList.appendChild(dt);\n\t\t\trandomList.appendChild(dd);\n\t\t}\n\t}\n}\n\n/**\n * ランダムワードの出力\n *\n * @returns {void}\n * @since   1.0.0\n * @version 1.5.0\n */\nfunction setrandomWord() {\n\t// 乱数の生成\n\tlet wordNum = Math.floor(xorRand.randomFloat() * randomWordList.length);\n\tconst randomWord = document.getElementById('randomWord');\n\n\trandomWord.setAttribute('href', 'scp-randomWord.html#wordID' + (wordNum + 1));\n\trandomWord.textContent = '';\n\trandomWord.insertAdjacentHTML('beforeend', randomWordList[wordNum].title);\n}\n\n// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n// DOM Content\n// HTMLの読み込み完了時に行われれる処理\ndocument.addEventListener('DOMContentLoaded', async function () {\n\t// Initialize\n\t// ローカルストレージサポートの確認\n\tconst isEnableStorage = storageAvailable('localStorage');\n\tconst dbTable = 'boxState';\n\tlet isIndexedDB = false;\n\n\tawait getRandomWord()\n\t\t.then(function (json) {\n\t\t\trandomWordList = json;\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tconsole.error(error);\n\t\t});\n\txorRand = new XorShift();\n\t// cPopup = new Popup('test');\n\n\t// let anchorList = document.querySelectorAll('a[title]');\n\t// anchorList.forEach(function (anchor) {\n\t// \t1;\n\t// });\n\n\t// ----------------------------------------------------------------------------------------------------\n\t// データベースの作成\n\t// 更新等もここで行われる\n\t/**\n\t * データベース更新処理\n\t *\n\t * @param   {object}    event   event value\n\t * @returns {void}\n\t * @since   1.5.0\n\t * @version 1.5.0\n\t */\n\tfunction aa(event) {\n\t\tlet db = event.target.result;\n\n\t\tlet objectStore = db.createObjectStore(dbTable, {keyPath: 'id'});\n\n\t\t// objectStore.createIndex('value', 'value', { unique: false });\n\n\t\t// データを追加する前に objectStore の作成を完了させるため、transaction oncomplete を使用する\n\t\tobjectStore.transaction.addEventListener('complete', function () {\n\t\t\t// 新たに作成した objectStore に値を保存する\n\t\t\tlet customerObjectStore = db.transaction(dbTable, 'readwrite').objectStore(dbTable);\n\t\t\tfor (let sideName of sideList) {\n\t\t\t\tcustomerObjectStore.add({id: sideName, value: 'false'});\n\t\t\t}\n\t\t});\n\t}\n\n\tlet dbConnection;\n\tif ((dbConnection = new IndexedDBConnecter(dbName, dbVersion)) !== false) {\n\t\tdbConnection.initializeConnection(aa);\n\t\tdbConnection.dbTable = dbTable;\n\t\tisIndexedDB = true;\n\t}\n\n\t// ----------------------------------------------------------------------------------------------------\n\t// 全て展開\n\t// この作成方法はlet + constだからこそ成り立っており、varでは作成できない\n\tdocument.getElementById('expandAll').addEventListener('click', function () {\n\t\tfor (let sideName of sideList) {\n\t\t\tconst btnElement = document.getElementById('btn' + sideName);\n\t\t\tconst linkElement = document.getElementById('link' + sideName);\n\n\t\t\t// trueに変更\n\t\t\tlinkElement.checked = true;\n\t\t\tsideToggle[sideName] = 'true';\n\t\t\tbtnElement.textContent = '-';\n\t\t\t// ローカルストレージサポートの確認\n\t\t\tif (isIndexedDB) {\n\t\t\t\tconst data = {id: sideName, value: 'true'};\n\t\t\t\tdbConnection.setValue(data);\n\t\t\t} else if (isEnableStorage) {\n\t\t\t\tlocalStorage.setItem(sideName + 'Toggle', 'true');\n\t\t\t}\n\t\t}\n\t});\n\n\t// ----------------------------------------------------------------------------------------------------\n\t// 全て折りたたむ\n\t// この作成方法はlet + constだからこそ成り立っており、varでは作成できない\n\tdocument.getElementById('collapseAll').addEventListener('click', function () {\n\t\tfor (let sideName of sideList) {\n\t\t\tconst btnElement = document.getElementById('btn' + sideName);\n\t\t\tconst linkElement = document.getElementById('link' + sideName);\n\n\t\t\t// falseに変更\n\t\t\tlinkElement.checked = false;\n\t\t\tsideToggle[sideName] = 'false';\n\t\t\tbtnElement.textContent = '+';\n\t\t\t// ローカルストレージサポートの確認\n\t\t\tif (isIndexedDB) {\n\t\t\t\tconst data = {id: sideName, value: 'false'};\n\t\t\t\tdbConnection.setValue(data);\n\t\t\t} else if (isEnableStorage) {\n\t\t\t\tlocalStorage.setItem(sideName + 'Toggle', 'false');\n\t\t\t}\n\t\t}\n\t});\n\n\t// ----------------------------------------------------------------------------------------------------\n\t// サイドバーの処理\n\tfor (let sideName of sideList) {\n\t\tconst btnElement = document.getElementById('btn' + sideName);\n\t\tconst linkElement = document.getElementById('link' + sideName);\n\n\t\t// ローカルストレージから情報を取得\n\t\t// 対応していない場合、常に折りたたんだ状態にする\n\t\tif (isIndexedDB) {\n\t\t\tawait dbConnection.getValue(sideName)\n\t\t\t\t.then(function (dbValue) {\n\t\t\t\t\tif (dbValue !== undefined) {\n\t\t\t\t\t\t// console.log(dbValue);\n\t\t\t\t\t\tsideToggle[sideName] = dbValue.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsideToggle[sideName] = 'false';\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(function (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t});\n\t\t} else if (isEnableStorage) {\n\t\t\tsideToggle[sideName] = localStorage.getItem(sideName + 'Toggle');\n\t\t} else {\n\t\t\tsideToggle[sideName] = 'false';\n\t\t}\n\n\t\t// 初期フラグの設定\n\t\t// フラグを基に隠すかの指定\n\t\t// console.log(sideToggle[sideName]);\n\t\tif (sideToggle[sideName] === null || sideToggle[sideName] === 'false') {\n\t\t\t// Null\n\t\t} else {\n\t\t\tbtnElement.textContent = '-';\n\t\t\tlinkElement.checked = true;\n\t\t}\n\n\t\t// イベントの登録\n\t\tlinkElement.addEventListener('change', function () {\n\t\t\t// フラグを基に隠すかの指定\n\t\t\tif (sideToggle[sideName] === null || sideToggle[sideName] === 'false') {\n\t\t\t\tsideToggle[sideName] = 'true';\n\n\t\t\t\tif (isIndexedDB) {\n\t\t\t\t\tconst data = {id: sideName, value: 'true'};\n\t\t\t\t\tdbConnection.setValue(data);\n\t\t\t\t} else if (isEnableStorage) {\n\t\t\t\t\tlocalStorage.setItem(sideName + 'Toggle', 'true');\n\t\t\t\t}\n\t\t\t\tbtnElement.textContent = '-';\n\t\t\t} else {\n\t\t\t\tsideToggle[sideName] = 'false';\n\t\t\t\tif (isIndexedDB) {\n\t\t\t\t\tconst data = {id: sideName, value: 'false'};\n\t\t\t\t\tdbConnection.setValue(data);\n\t\t\t\t} else if (isEnableStorage) {\n\t\t\t\t\tlocalStorage.setItem(sideName + 'Toggle', 'false');\n\t\t\t\t}\n\t\t\t\tbtnElement.textContent = '+';\n\t\t\t}\n\t\t});\n\t}\n\n\t// ----------------------------------------------------------------------------------------------------\n\t/**\n\t * 現在の個数\n\t * @constant\n\t * @type {HTMLElement}\n\t */\n\tconst cntRandom = document.getElementById('countRandom');\n\tif (cntRandom !== null) {\n\t\tcntRandom.textContent = randomWordList.length;\n\t}\n\n\t// ----------------------------------------------------------------------------------------------------\n\t/**\n\t * ランダムワードの出力位置\n\t * @constant\n\t * @type {HTMLElement}\n\t */\n\tconst textRandom = document.getElementById('randomOutput');\n\tif (textRandom !== null) {\n\t\trandomOutput(randomWordList);\n\t}\n\n\tsetrandomWord();\n\n\troopEvent = setInterval(secondsInterval, 50, 10);\n});\n\n// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n// load\n// 全ての読み込みが完了すると行われる処理\nwindow.addEventListener('load', function () {\n\tdocument.getElementById('LoadTime').textContent = Date.now() - startTime + ' ms';\n});\n"]}