import{SendAjax}from"./ajax-response.min.js";const sideList=["Main","CSS","HTML","JavaScript","Language","Node","PHP","SCSS","SQL","Wordpress","Other"],startTime=Date.now();let randomWordList,xorRand,bWordDecide=!1,sideToggle=[];class XorShift{constructor(e=Math.floor(Date.now()/1e3)){let t=new Date;this.x=Math.max(Math.floor(t.getDate()**((t.getMonth()+1)/4+2)),(t.getMonth()+1)*t.getDate()*Math.max(t.getSeconds()**2,31)*Math.max(t.getMinutes()**2,53)),this.y=Math.max(Math.max(t.getSeconds(),5)**Math.floor(Math.max(t.getMinutes(),10)/10)+Math.max(t.getSeconds(),1)*Math.max(t.getMinutes(),1)*Math.floor(t.getFullYear()/10)),this.z=randomWordList.length**4+(randomWordList[2].summary.length+randomWordList[3].summary.length+randomWordList[5].summary.length+randomWordList[7].summary.length)*(randomWordList[11].summary.length+randomWordList[13].summary.length+randomWordList[17].summary.length+randomWordList[19].summary.length)*(randomWordList[23].summary.length+randomWordList[29].summary.length)+(randomWordList[31].summary.length+randomWordList[37].summary.length),this.w=e,console.log("Seed Info:"),console.log("X: "+this.toHex(this.x)+" ("+this.x+")"),console.log("Y: "+this.toHex(this.y)+" ("+this.y+")"),console.log("Z: "+this.toHex(this.z)+" ("+this.z+")"),console.log("W: "+this.toHex(this.w)+" ("+this.w+")")}toHex(e){return"0x"+("00000000"+e.toString(16).toUpperCase()).substr(-8)}randomInt32(){let e=this.x^this.x<<11;return this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.w^this.w>>>19^e^e>>>8,this.w}randomFloat(){let e=this.randomInt32();return e<0&&(e=~e),e/(2**31-1)}}class Popup{constructor(e){this.name="popup_"+e;let t=document.body;const o=document.createElement("div");o.setAttribute("id",this.name),o.style.position="absolute",t.insertBefore(o,document.querySelector("header"))}show(e,t,o){const n=document.getElementById(this.name);n.style.display="block",n.style.top=t,n.style.left=o,n.textContent=e}move(e,t){const o=document.getElementById(this.name);o.style.top=e,o.style.left=t}hide(){const e=document.getElementById(this.name);e.style.display="none",e.textContent=""}}function storageAvailable(e){let t=window[e];try{let e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}}function getRandomWord(){return new Promise(function(e,t){SendAjax("json/randomWord.json",new FormData,"GET").then(function(t){e(t)}).catch(function(e){console.error("request failed",e),t(e)})})}function secondsInterval(e=5){let t=new Date;t.getSeconds()%e==0&&!1===bWordDecide?(bWordDecide=!0,setrandomWord()):t.getSeconds()%e==1&&!0===bWordDecide&&(bWordDecide=!1)}async function randomOutput(e){const t=document.getElementById("randomOutput"),o=document.createElement("dl");let n=0;o.setAttribute("id","RandomList"),t.textContent="",t.appendChild(o);const s=document.getElementById("RandomList");if(window.Worker){const e=new Worker("js/WorkerTask.js");e.addEventListener("message",function(e){let t=e.data;switch(t.mode){case"listResult":s.insertAdjacentHTML("beforeend",t.post);break;case"tagList":console.log(t.post);break;default:console.log('Task mode "'+t.mode+'" is not found.')}}),e.addEventListener("messageerror",function(e){console.error("Task failed",e.data)}),e.postMessage({mode:"createRandList"})}else for(let t of e){const e=document.createElement("dt"),o=document.createElement("dd");e.setAttribute("id","wordID"+ ++n),e.insertAdjacentHTML("beforeend","<h3>"+t.title+"</h3><h4>出典: "+t.original+"</h4>"),o.insertAdjacentHTML("beforeend",t.summary),s.appendChild(e),s.appendChild(o)}}function setrandomWord(){let e=Math.floor(xorRand.randomFloat()*randomWordList.length);const t=document.getElementById("randomWord");t.setAttribute("href","scp-randomWord.html#wordID"+(e+1)),t.textContent="",t.insertAdjacentHTML("beforeend",randomWordList[e].title)}document.addEventListener("DOMContentLoaded",async function(){const e=storageAvailable("localStorage");await getRandomWord().then(function(e){randomWordList=e}).catch(function(e){console.error(e)}),xorRand=new XorShift,document.getElementById("expandAll").addEventListener("click",function(){for(let t of sideList){const o=document.getElementById("btn"+t);document.getElementById("link"+t).checked=!0,sideToggle[t]="true",o.textContent="-",e&&localStorage.setItem(t+"Toggle","true")}}),document.getElementById("collapseAll").addEventListener("click",function(){for(let t of sideList){const o=document.getElementById("btn"+t);document.getElementById("link"+t).checked=!1,sideToggle[t]="false",o.textContent="+",e&&localStorage.setItem(t+"Toggle","false")}});for(let t of sideList){const o=document.getElementById("btn"+t),n=document.getElementById("link"+t);sideToggle[t]=e?localStorage.getItem(t+"Toggle"):"false",null===sideToggle[t]||"false"===sideToggle[t]||(o.textContent="-",n.checked=!0),n.addEventListener("change",function(){null===sideToggle[t]||"false"===sideToggle[t]?(sideToggle[t]="true",e&&localStorage.setItem(t+"Toggle","true"),o.textContent="-"):(sideToggle[t]="false",e&&localStorage.setItem(t+"Toggle","false"),o.textContent="+")})}const t=document.getElementById("countRandom");null!==t&&(t.textContent=randomWordList.length),null!==document.getElementById("randomOutput")&&randomOutput(randomWordList),setrandomWord(),setInterval(function(){secondsInterval(10)},50)}),window.addEventListener("load",function(){document.getElementById("LoadTime").textContent=Date.now()-startTime+"ms"});
//# sourceMappingURL=maps/Main.min.js.map